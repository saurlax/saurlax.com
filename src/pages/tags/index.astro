---
import { getCollection } from "astro:content";
import ListLayout from "../../layouts/ListLayout.astro";
import Card from "../../components/Card.astro";

const postsEntries = await getCollection("posts");
const tags: Record<string, number> = {};
postsEntries.forEach((entry) => {
  entry.data.tags.forEach((tag) => {
    tags[tag] = (tags[tag] || 0) + 1;
  });
});
---

<ListLayout title="Tags">
  {
    Object.keys(tags)
      .sort((a, b) => a.localeCompare(b))
      .map((key) => (
        <Card
          title={key}
          description={`${tags[key]} ç¯‡`}
          href={`/tags/${key}`}
        />
      ))
  }
</ListLayout>
