<script
  is:inline
  class="giscus-script"
  src="https://giscus.app/client.js"
  data-repo="saurlax/saurlax"
  data-repo-id="R_kgDOG_gYgA"
  data-category="Comments"
  data-category-id="DIC_kwDOG_gYgM4Cju9B"
  data-mapping="pathname"
  data-strict="0"
  data-reactions-enabled="0"
  data-emit-metadata="0"
  data-input-position="top"
  data-theme="preferred_color_scheme"
  data-lang="zh-CN"
  crossorigin="anonymous"
  async></script>

<script is:inline>
  function updateGiscusTheme(theme) {
    const iframe = document.querySelector("iframe.giscus-frame");
    iframe?.contentWindow.postMessage(
      { giscus: { setConfig: { theme } } },
      "https://giscus.app"
    );
  }

  window.addEventListener("dark", (e) => {
    updateGiscusTheme(e.detail ? "dark" : "light");
  });

  document
    .querySelector(".giscus-script")
    .setAttribute(
      "data-theme",
      document.documentElement.classList.contains("dark") ? "dark" : "light"
    );
</script>
